<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snack Packz</title>
  <meta name="description" content="Snack Packz ‚Äî a 3D snack hub for real-life packs." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#06070b;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.04);
      --line: rgba(255,255,255,.10);
      --line2: rgba(255,255,255,.14);
      --text:#eef2ff;
      --muted: rgba(238,242,255,.72);
      --yellow:#ffd400;
      --orange:#ff9f1a;
      --blue:#7fb3ff;
      --r: 26px;
      --shadow: 0 24px 80px rgba(0,0,0,.55);
      --shadow2: 0 10px 40px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at 15% -10%, rgba(255,212,0,.20), transparent 60%),
        radial-gradient(900px 700px at 105% 0%, rgba(127,179,255,.18), transparent 55%),
        radial-gradient(900px 700px at 70% 120%, rgba(255,159,26,.12), transparent 60%),
        var(--bg);
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}

    /* ===== Top bar ===== */
    .top{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.22));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:14px 18px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:14px}
    .brand{display:flex;align-items:center;gap:12px;min-width:0}
    .mark{
      width:42px;height:42px;border-radius:16px;
      background: linear-gradient(135deg,var(--yellow),var(--orange));
      box-shadow: 0 18px 60px rgba(255,212,0,.18);
      flex:0 0 auto;
    }
    .title{
      font-family: Anton, Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      letter-spacing: 1.2px;
      font-size: 28px; line-height:1; margin:0;
      text-transform: uppercase;
      white-space:nowrap;
    }
    .sub{
      margin:4px 0 0;
      color: var(--muted);
      font-size: 13px;
      white-space:nowrap;
      overflow:hidden;text-overflow:ellipsis;
      max-width: 52vw;
    }

    .actions{display:flex;align-items:center;gap:10px}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      box-shadow: var(--shadow2);
      font-weight: 800;
      font-size: 13px;
      user-select:none;
    }
    .pill.small{padding:8px 10px;font-size:12.5px;font-weight:800}
    .pill.primary{
      border-color: rgba(255,212,0,.35);
      background: rgba(255,212,0,.14);
    }
    .pill:active{transform: translateY(1px)}

    /* ===== Stage ===== */
    .stage{
      max-width:1200px;
      margin: 22px auto 40px;
      padding: 0 18px;
      position:relative;
    }

    /* Fancy faint star field */
    .stars{
      position:absolute; inset:-100px -40px -120px -40px;
      pointer-events:none;
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.55) 0, transparent 1px),
        radial-gradient(1px 1px at 80% 30%, rgba(255,255,255,.40) 0, transparent 1px),
        radial-gradient(1px 1px at 55% 85%, rgba(255,255,255,.35) 0, transparent 1px),
        radial-gradient(1px 1px at 25% 70%, rgba(255,255,255,.30) 0, transparent 1px),
        radial-gradient(1px 1px at 90% 75%, rgba(255,255,255,.25) 0, transparent 1px);
      opacity:.55;
      filter: blur(.1px);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 16px;
      align-items:center;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr; gap:14px}
      .sub{max-width: 70vw}
    }

    /* Hero card */
    .hero{
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(900px 300px at 10% 10%, rgba(255,212,0,.14), transparent 55%),
        radial-gradient(900px 300px at 100% 40%, rgba(127,179,255,.14), transparent 60%),
        rgba(255,255,255,.05);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      padding: 26px;
      min-height: 260px;
    }
    .hero h1{
      font-size: clamp(34px, 4.2vw, 56px);
      line-height: 1.02;
      margin:0 0 10px;
      letter-spacing: -.6px;
    }
    .hero p{
      margin:0;
      color: var(--muted);
      max-width: 62ch;
      line-height: 1.5;
      font-size: 14.5px;
    }

    .chips{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top: 14px;
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:9px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: rgba(238,242,255,.86);
      font-size: 12.5px;
      backdrop-filter: blur(8px);
    }

    .hintrow{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top: 16px;
      color: rgba(238,242,255,.78);
      font-size: 12.5px;
    }
    .hint{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding:8px 10px;
      border-radius: 999px;
    }

    /* ===== Ring panel ===== */
    .ringPanel{
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      min-height: 380px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }

    /* Donut */
    .donutWrap{
      position:relative;
      width: 360px;
      height: 360px;
      max-width: 78vw;
      max-height: 78vw;
      user-select:none;
      touch-action: none;
    }

    .donut{
      position:absolute; inset:0;
      border-radius: 999px;
      background:
        conic-gradient(from 0deg,
          rgba(255,212,0,.95),
          rgba(255,159,26,.90),
          rgba(127,179,255,.85),
          rgba(255,212,0,.95)
        );
      filter: drop-shadow(0 25px 60px rgba(0,0,0,.45));
      transform: rotate(0deg);
      will-change: transform;
    }

    /* inner hole */
    .donut::after{
      content:"";
      position:absolute;
      inset: 26%;
      border-radius: 999px;
      background:
        radial-gradient(180px 140px at 30% 25%, rgba(255,212,0,.12), transparent 55%),
        radial-gradient(200px 170px at 90% 70%, rgba(127,179,255,.12), transparent 55%),
        rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: inset 0 0 50px rgba(0,0,0,.6);
    }

    /* center text */
    .centerText{
      position:absolute;
      inset: 26%;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: 18px;
      z-index: 5;
      pointer-events:none;
    }
    .centerText b{display:block;font-size:14px}
    .centerText span{display:block;margin-top:6px;color:rgba(238,242,255,.70);font-size:12.5px}

    /* Vibe pills around ring */
    .vibes{
      position:absolute;
      inset:-10px;
      z-index: 7;
      transform: rotate(0deg);
      will-change: transform;
      pointer-events:auto;
    }
    .vibe{
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(-50%,-50%) rotate(var(--a)) translateY(-185px) rotate(calc(-1 * var(--a)));
      transform-origin: center;
      width: 126px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      cursor: pointer;
      transition: transform .18s ease, border-color .18s ease, background .18s ease;
      font-weight: 900;
      font-size: 12.5px;
      color: rgba(238,242,255,.88);
    }
    .vibe i{opacity:.95;font-style:normal}
    .vibe:hover{
      border-color: rgba(255,212,0,.35);
      background: rgba(255,212,0,.10);
    }
    .vibe.active{
      border-color: rgba(255,212,0,.55);
      background: rgba(255,212,0,.14);
      box-shadow: 0 0 0 1px rgba(255,212,0,.25), 0 18px 55px rgba(0,0,0,.45);
    }

    /* ===== Premium preview card ===== */
    .preview{
      position: fixed;
      right: 18px;
      bottom: 18px;
      width: min(380px, 92vw);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(10,12,18,.62);
      backdrop-filter: blur(14px);
      box-shadow: 0 24px 90px rgba(0,0,0,.62);
      overflow:hidden;
      z-index: 999;
      transform: translateY(14px);
      opacity: 0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
    }
    .preview.show{
      opacity: 1;
      transform: translateY(0);
      pointer-events:auto;
    }
    .pvMedia{
      position: relative;
      height: 190px;
      background: rgba(255,255,255,.03);
    }
    .pvMedia img,
    .pvMedia video{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit: cover;
      transform: scale(1.02);
      transition: transform 1.2s ease;
      filter: saturate(1.06) contrast(1.06);
    }
    .preview:hover .pvMedia img,
    .preview:hover .pvMedia video{ transform: scale(1.08); }

    /* hide video until ready */
    .pvMedia video{ opacity: 0; }
    .pvMedia video.ready{ opacity: 1; }

    .pvShade{
      position:absolute; inset:0;
      background:
        linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.78)),
        radial-gradient(700px 240px at 20% 10%, rgba(255,212,0,.16), transparent 55%);
      pointer-events:none;
    }
    .pvBody{ padding: 14px 14px 16px; }
    .pvKicker{
      display:inline-flex; align-items:center; gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      font-size: 12px;
      font-weight: 900;
      color: rgba(238,242,255,.88);
      margin-bottom: 10px;
    }
    .pvTitle{ margin:0; font-size: 18px; letter-spacing: .2px; }
    .pvDesc{ margin:6px 0 12px; color: rgba(238,242,255,.72); font-size: 13px; line-height: 1.35; }

    .pvBtns{ display:flex; gap:10px; align-items:center; }
    .pvBtn{
      display:inline-flex; align-items:center; justify-content:center;
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      font-weight: 900;
      font-size: 13px;
      cursor:pointer;
    }
    .pvBtn.primary{
      border-color: rgba(255,212,0,.38);
      background: rgba(255,212,0,.14);
    }

    .pvClose{
      position:absolute; top:10px; right:10px;
      width:34px; height:34px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      z-index: 5;
    }

    /* Mobile tweaks */
    @media (hover: none){
      .preview{ right: 10px; bottom: 10px; }
    }
  </style>
</head>

<body>
  <div class="top">
    <div class="wrap">
      <div class="row">
        <div class="brand">
          <div class="mark" aria-hidden="true"></div>
          <div style="min-width:0">
            <h1 class="title">Snack Packz</h1>
            <p class="sub">Spin the snack ‚Ä¢ pick a vibe ‚Ä¢ click to enter</p>
          </div>
        </div>

        <div class="actions">
          <button class="pill small" id="soundBtn" type="button">üîà Sound: Off</button>
          <a class="pill primary" href="https://wa.me/447483849357?text=Yo%20-%20what%20packs%20are%20available%20today%3F" target="_blank" rel="noopener">Order</a>
        </div>
      </div>
    </div>
  </div>

  <main class="stage">
    <div class="stars" aria-hidden="true"></div>

    <section class="grid">
      <!-- HERO -->
      <div class="hero">
        <h1>A 3D snack hub for real-life packs.</h1>
        <p>
          Drag the donut or drag the menu ring. Hover a vibe to preview it. Click to enter.
          Stock changes daily, the vibe stays elite.
        </p>

        <div class="chips">
          <span class="chip">üíõ Sticker inside</span>
          <span class="chip">üéüÔ∏è Prize draw entry</span>
          <span class="chip">üé≤ RNG drops sometimes</span>
          <span class="chip">‚ö†Ô∏è No energy drinks to under 16s</span>
        </div>

        <div class="hintrow">
          <span class="hint">üü° Drag = spin</span>
          <span class="hint">üñ±Ô∏è Wheel = scroll ring</span>
          <span class="hint">üëÜ Tap = preview / enter</span>
        </div>
      </div>

      <!-- RING -->
      <div class="ringPanel">
        <div class="donutWrap" id="donutWrap" aria-label="Snack ring menu">
          <div class="donut" id="donut"></div>

          <div class="centerText">
            <div>
              <b>Spin. Hover. Enter.</b>
              <span>Futuristic menu. No dead sandwich energy.</span>
            </div>
          </div>

          <div class="vibes" id="vibes">
            <!-- Each vibe uses data- attributes (NO IDs needed) -->
            <div class="vibe" style="--a:0deg"
              data-kicker="üèãÔ∏è Gym"
              data-title="Gym Packs"
              data-desc="Starter ‚Ä¢ OG ‚Ä¢ Sweat Session ‚Ä¢ Afterburn."
              data-img="assets/gym.jpg"
              data-vid="assets/gym.mp4"
              data-link="gym.html"
            ><i>üèãÔ∏è</i> Gym</div>

            <div class="vibe" style="--a:60deg"
              data-kicker="üß† Lock-In"
              data-title="Lock-In Packs"
              data-desc="Revision fuel ‚Ä¢ all-nighter kit ‚Ä¢ focus mode."
              data-img="assets/lockin.jpg"
              data-vid="assets/lockin.mp4"
              data-link="lock-in.html"
            ><i>üß†</i> Lock-in</div>

            <div class="vibe" style="--a:120deg"
              data-kicker="üß∞ Work"
              data-title="Shift Packs"
              data-desc="Cheaper than random shop runs. No dead meal deals."
              data-img="assets/work.jpg"
              data-vid="assets/work.mp4"
              data-link="work.html"
            ><i>üß∞</i> Work</div>

            <div class="vibe" style="--a:180deg"
              data-kicker="üéÆ Gaming"
              data-title="Gaming Packs"
              data-desc="Queue ‚Ä¢ clutch ‚Ä¢ late nights. Don‚Äôt tilt hungry."
              data-img="assets/gaming.jpg"
              data-vid="assets/gaming.mp4"
              data-link="gaming.html"
            ><i>üéÆ</i> Gaming</div>

            <div class="vibe" style="--a:240deg"
              data-kicker="üé≤ Mystery"
              data-title="RNG Drops"
              data-desc="Lucky dip energy. Loot drop vibes. Could be elite."
              data-img="assets/mystery.jpg"
              data-vid="assets/mystery.mp4"
              data-link="mystery.html"
            ><i>üé≤</i> Mystery</div>

            <div class="vibe" style="--a:300deg"
              data-kicker="üßº Fresh"
              data-title="Fresh Packs"
              data-desc="Deo ‚Ä¢ wipes ‚Ä¢ mints ‚Ä¢ smell-good. Reset your day."
              data-img="assets/fresh.jpg"
              data-vid="assets/fresh.mp4"
              data-link="fresh.html"
            ><i>üßº</i> Fresh</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Premium preview card (single, reusable) -->
  <aside class="preview" id="preview" aria-live="polite">
    <div class="pvMedia">
      <div class="pvClose" id="pvClose" title="Close">‚úï</div>
      <img id="pvImg" alt="" />
      <video id="pvVid" muted playsinline preload="metadata"></video>
      <div class="pvShade" aria-hidden="true"></div>
    </div>
    <div class="pvBody">
      <div class="pvKicker" id="pvKicker">‚ú® Preview</div>
      <h3 class="pvTitle" id="pvTitle">Title</h3>
      <p class="pvDesc" id="pvDesc">Description</p>
      <div class="pvBtns">
        <button class="pvBtn primary" id="pvEnter" type="button">Enter</button>
        <button class="pvBtn" id="pvPin" type="button">Keep open</button>
      </div>
    </div>
  </aside>

  <script>
    // ===== Sound toggle (placeholder - your future SFX can hook into this)
    let soundOn = false;
    const soundBtn = document.getElementById('soundBtn');
    soundBtn.addEventListener('click', () => {
      soundOn = !soundOn;
      soundBtn.textContent = soundOn ? "üîä Sound: On" : "üîà Sound: Off";
    });

    // ===== Preview system (no IDs on vibes needed)
    const preview = document.getElementById('preview');
    const pvImg = document.getElementById('pvImg');
    const pvVid = document.getElementById('pvVid');
    const pvKicker = document.getElementById('pvKicker');
    const pvTitle = document.getElementById('pvTitle');
    const pvDesc = document.getElementById('pvDesc');
    const pvEnter = document.getElementById('pvEnter');
    const pvPin = document.getElementById('pvPin');
    const pvClose = document.getElementById('pvClose');

    let pinned = false;
    let currentLink = null;

    function showPreviewFor(el){
      const kicker = el.dataset.kicker || "‚ú® Preview";
      const title  = el.dataset.title  || "Snack Packz";
      const desc   = el.dataset.desc   || "";
      const imgSrc = el.dataset.img    || "";
      const vidSrc = el.dataset.vid    || "";
      currentLink  = el.dataset.link   || null;

      pvKicker.textContent = kicker;
      pvTitle.textContent = title;
      pvDesc.textContent = desc;

      // Always set image immediately (fast)
      pvImg.src = imgSrc;
      pvImg.alt = title;

      // Reset video
      pvVid.classList.remove('ready');
      pvVid.pause();
      pvVid.removeAttribute('src');
      pvVid.load();

      if(vidSrc){
        pvVid.src = vidSrc;

        const markReady = () => {
          pvVid.classList.add('ready');
          // try play (only works muted)
          pvVid.play().catch(()=>{});
        };

        pvVid.onloadeddata = markReady;
        pvVid.oncanplay = markReady;
        pvVid.onerror = () => {
          pvVid.classList.remove('ready');
        };
        pvVid.load();
      }

      preview.classList.add('show');
    }

    function hidePreview(){
      if(pinned) return;
      preview.classList.remove('show');
      pvVid.pause();
    }

    document.querySelectorAll('.vibe').forEach(v => {
      v.addEventListener('mouseenter', () => {
        if(pinned) return;
        showPreviewFor(v);
        setActive(v);
      });
      v.addEventListener('mouseleave', () => {
        // small delay so it doesn't flicker if you move fast
        setTimeout(() => { hidePreview(); }, 120);
      });

      // Click = snap to it + open page
      v.addEventListener('click', () => {
        showPreviewFor(v);
        pinned = false;
        pvPin.textContent = "Keep open";
        snapToVibe(v);
        if(currentLink) window.location.href = currentLink;
      });

      // Mobile tap preview first, second tap enter
      let tapped = false;
      v.addEventListener('touchstart', (e) => {
        if(!tapped){
          e.preventDefault();
          tapped = true;
          showPreviewFor(v);
          setActive(v);
          snapToVibe(v);
          setTimeout(()=> tapped = false, 900);
        }
      }, {passive:false});
    });

    pvEnter.addEventListener('click', () => {
      if(currentLink) window.location.href = currentLink;
    });

    pvPin.addEventListener('click', () => {
      pinned = !pinned;
      pvPin.textContent = pinned ? "Unpin" : "Keep open";
      if(!pinned) hidePreview();
    });

    pvClose.addEventListener('click', () => {
      pinned = false;
      pvPin.textContent = "Keep open";
      hidePreview();
    });

    // ===== Ring + donut spin (drag + wheel + snap)
    const donutWrap = document.getElementById('donutWrap');
    const donut = document.getElementById('donut');
    const vibes = document.getElementById('vibes');

    let rot = -20; // start angle
    let dragging = false;
    let startX = 0;
    let startRot = 0;

    function applyRot(){
      donut.style.transform = `rotate(${rot}deg)`;
      vibes.style.transform = `rotate(${rot}deg)`;
    }
    applyRot();

    // drag to rotate
    donutWrap.addEventListener('pointerdown', (e) => {
      dragging = true;
      donutWrap.setPointerCapture(e.pointerId);
      startX = e.clientX;
      startRot = rot;
    });
    donutWrap.addEventListener('pointermove', (e) => {
      if(!dragging) return;
      const dx = e.clientX - startX;
      rot = startRot + dx * 0.35;
      applyRot();
    });
    donutWrap.addEventListener('pointerup', () => { dragging = false; });
    donutWrap.addEventListener('pointercancel', () => { dragging = false; });

    // wheel scroll rotates ring (THIS fixes your "wait ages" problem)
    donutWrap.addEventListener('wheel', (e) => {
      e.preventDefault();
      rot += (e.deltaY > 0 ? 18 : -18);
      applyRot();
    }, {passive:false});

    // snap to clicked vibe quickly
    function snapToVibe(el){
      const a = parseFloat((el.style.getPropertyValue('--a') || "0").replace("deg","")) || 0;
      // We want that vibe to face roughly right side (a target angle)
      // Vibe uses rotate(var(--a)) then we rotate the whole vibes container by rot,
      // so visible angle = a + rot. Target visible angle = ~20deg.
      const targetVisible = 20;
      const desiredRot = targetVisible - a;

      animateTo(desiredRot, 260);
      setActive(el);
    }

    function animateTo(target, ms){
      const from = rot;
      const start = performance.now();
      function step(t){
        const p = Math.min(1, (t - start) / ms);
        const ease = 1 - Math.pow(1 - p, 3); // easeOutCubic
        rot = from + (target - from) * ease;
        applyRot();
        if(p < 1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    function setActive(el){
      document.querySelectorAll('.vibe').forEach(x => x.classList.remove('active'));
      el.classList.add('active');
    }

    // Optional: start with Gym selected + preview (feels "alive")
    const first = document.querySelector('.vibe');
    if(first){
      setActive(first);
      showPreviewFor(first);
      setTimeout(()=>{ if(!pinned) hidePreview(); }, 1200);
    }
  </script>
</body>
</html>
